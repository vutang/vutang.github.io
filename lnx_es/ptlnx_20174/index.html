
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://www.vutang.github.io/lnx_es/ptlnx_20174/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.2">
    
    
      
        <title>Petalinux 2017.4 technical note - Vu Tang's Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1118c9be.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#petalinux-20174-technical-note" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Vu Tang&#39;s Docs" class="md-header__button md-logo" aria-label="Vu Tang's Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vu Tang's Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Petalinux 2017.4 technical note
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Vu Tang&#39;s Docs" class="md-nav__button md-logo" aria-label="Vu Tang's Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Vu Tang's Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Preface
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        General Technote
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="General Technote" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          General Technote
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../technote/mkdocs/mkdocs-notes/" class="md-nav__link">
        Mkdocs Tool
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../technote/markdown/markdown/" class="md-nav__link">
        Markdown Language
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../technote/shellscript/shellscript/" class="md-nav__link">
        Shell Script
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../technote/python/python/" class="md-nav__link">
        Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../technote/virutal_machine/virtual_box.md" class="md-nav__link">
        Virtual Machine
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Book & Materials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Book & Materials" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Book & Materials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/c_books/" class="md-nav__link">
        C Programing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/linux/" class="md-nav__link">
        Linux Programing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/device_driver/" class="md-nav__link">
        Linux Device Driver
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/linux_kernel/" class="md-nav__link">
        Linux Kernel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/es_linux/" class="md-nav__link">
        Linux Embedded
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/dsa/dsa_toc/" class="md-nav__link">
        Data Structure & Algorithms
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../books/others/" class="md-nav__link">
        Others
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Programming
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Programming" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Programming
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/C/cprogramming/" class="md-nav__link">
        C
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/dsa/dsa/" class="md-nav__link">
        DSA
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/sql/mysql/" class="md-nav__link">
        SQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/lnx/lpi/" class="md-nav__link">
        Linux Programming Interfaces
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/dsg_patterns/" class="md-nav__link">
        Design Patterns
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/multi-threaded-programming/" class="md-nav__link">
        Multi-threads
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/perf/perf/" class="md-nav__link">
        Perf
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Linux General
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux General" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Linux General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx/linux/" class="md-nav__link">
        Unsorted
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx/cmds/" class="md-nav__link">
        Commands
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Linux ES Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux ES Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Linux ES Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../es/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../hw_platform/" class="md-nav__link">
        HW Platforms
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cmn_tool/" class="md-nav__link">
        Common Tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../version_control/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ptlnx/" class="md-nav__link">
        Xilinx Petalinux
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../yocto/" class="md-nav__link">
        Yocto
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../eeprom/eeprom/" class="md-nav__link">
        EEPROM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tips/tips/" class="md-nav__link">
        Tips
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Linux Device Driver
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux Device Driver" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Linux Device Driver
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/kernel_module/" class="md-nav__link">
        Kernel Module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/platform_dev/platform_device/" class="md-nav__link">
        Platform Device
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/spi_dev/spi_dev/" class="md-nav__link">
        SPI Device
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/spi_dev/spi_advance/" class="md-nav__link">
        SPI Device Advance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/gpio/gpio/" class="md-nav__link">
        GPIO
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/uart/uart/" class="md-nav__link">
        UART
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/jesd/jesd/" class="md-nav__link">
        JESD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/audio/linux_audio/" class="md-nav__link">
        Audio
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_ldd/pcie/pcie/" class="md-nav__link">
        PCIe
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Linux Kernel Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux Kernel Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Linux Kernel Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_kernel/kernel_data_structure/" class="md-nav__link">
        Kernel Data Structure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lnx_kernel/kernel_user_space/" class="md-nav__link">
        Kernel Space, User Space Interfaces
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        FPGA
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="FPGA" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          FPGA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../fpga/timing_analysis/timing_analysis/" class="md-nav__link">
        Static Timing Analysis
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../fpga/x_ipcore/xipcore/" class="md-nav__link">
        Xilinx IPCore
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        Projects
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Projects" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Projects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../projects/zynq/zynq/" class="md-nav__link">
        Zynq
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../projects/imx8/imx8/" class="md-nav__link">
        IMX8
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../projects/pi3b/" class="md-nav__link">
        Raspberrypi 3B
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../bookmarks/bookmarks/" class="md-nav__link">
        Bookmarks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../whatnext/" class="md-nav__link">
        What's next
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about/about/" class="md-nav__link">
        About me
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introdutions" class="md-nav__link">
    Introdutions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips" class="md-nav__link">
    Tips
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worknote" class="md-nav__link">
    Worknote
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiences" class="md-nav__link">
    Experiences
  </a>
  
    <nav class="md-nav" aria-label="Experiences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-and-initialize-a-project" class="md-nav__link">
    Create and initialize a project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-a-new-project-without-internet" class="md-nav__link">
    Build a new project without Internet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-from-sd-card" class="md-nav__link">
    Boot from SD card
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-sd-card-in-booting-time" class="md-nav__link">
    Mounting SD card in booting-time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-user-custom-package" class="md-nav__link">
    Add user custom package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#petalinux-imagebbappend" class="md-nav__link">
    petalinux-image.bbappend
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-auto-run-at-startup" class="md-nav__link">
    Application Auto Run at Startup
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="petalinux-20174-technical-note">Petalinux 2017.4 technical note</h1>
<p><em>Vu Tang - 2/2019</em></p>
<h2 id="introdutions">Introdutions</h2>
<p>Tài liệu này là tổng hợp các điểm lưu ý trong quá trình làm việc với Petalinux 2017.4. Version 2017.4 này của Xilinx là một thể hiện rõ ràng của việc ứng dụng <a href="https://www.yoctoproject.org/">YOCTO PROJECT</a> trong quá trình phát triển một hệ nhúng Linux. Để hiểu rõ hơn quá trình làm việc của petalinux 2017.4, cần tìm hiểu thêm về nguyên tắc hoạt động của Yocto. </p>
<h2 id="tips">Tips</h2>
<p><strong>Speed up sstate checking</strong></p>
<p><a href="https://forums.xilinx.com/t5/Embedded-Linux/Checking-sstate-mirror-taking-forever/td-p/775404">https://forums.xilinx.com/t5/Embedded-Linux/Checking-sstate-mirror-taking-forever/td-p/775404</a></p>
<ul>
<li>Diable sstate online in Yocto</li>
</ul>
<h2 id="worknote">Worknote</h2>
<ul>
<li>
<p>build target when use <code>petalinux build</code> is petalinux-user-image.bb. Bitbake file dir: [project dir]/project-spec/meta-plnx-generated/recipes-core/images/petalinux-user-image.bb</p>
</li>
<li>
<p>based-bitbake file be used for all project is found at: [installation dir]/components/yocto/source/</p>
</li>
<li>
<p><code>petalinux-build -x clean/distclean</code> is not affect to download dir  </p>
</li>
<li>Removing build/tmp dir need to rebuild all project (except fetching source code). This job takes a while.</li>
<li><code>petalinux-build -x distclean</code> will call <code>bitbake -c cleansstate</code> -&gt; what is cleansstate?</li>
<li>
<p><code>clean</code> -&gt; bitbake -c clean. what is defference btw <code>clean</code> &amp; <code>cleansstate</code></p>
</li>
<li>
<p>$WORKDIR: build/tmp/work/plnx_arm-xilinx-linux-gnueabi/libsample-tar/1.0-r0</p>
</li>
</ul>
<h2 id="experiences">Experiences</h2>
<h3 id="create-and-initialize-a-project">Create and initialize a project</h3>
<p>Quá trình khởi tạo project (1) và import hdf (2) tiến hành tương tự với petalinux 2015.4 (xem thêm ug1144 để biết về các cmd tương ứng cho từng quá trình). </p>
<pre><code>├── config.project
└── project-spec
    ├── attributes
    ├── configs
    │   ├── config
    │   └── rootfs_config
    ├── hw-description
    │   └── metadata
    └── meta-user
        ├── conf
        ├── COPYING.MIT
        ├── README
        ├── recipes-apps
        └── recipes-bsp
</code></pre>
<p>Kết thúc quá trình (1), project được tạo với thư mục “project-spec”. Trong đó:</p>
<ul>
<li>Thư mục con “configs” chứa các cấu hình của project (các cấu hình này được thay đổi bằng họ câu lệnh “petalinux-config”).</li>
<li>Thư mục con “hw-description” trống.</li>
<li>Thư mục con “meta-user” chứa các recipes liên quan đến user-apps và bsp. Ngoai ra thư mục này còn chứa trong ./conf các cấu hình liên quan đến Yocto cho Layer meta-user.</li>
</ul>
<p>Kết thúc quá trình (2), cấu trúc thư mục của project biến đổi như hình vẽ dưới đây.</p>
<pre><code>├── build
│   ├── cache
│   ├── conf
│   ├── config.log
│   ├── misc
│   └── tmp
├── components
│   └── plnx_workspace
├── config.project
└── project-spec
    ├── attributes
    ├── configs
    ├── hw-description
    ├── meta-plnx-generated
    ├── meta-user
    └── yocto-layer.log

</code></pre>
<p>Trong đó, xuất hiện thêm một số thư mục quan trọng sau:</p>
<ul>
<li>Thư mục “build” là thư mục được sử dụng đế tiến hành các giai đoạn trong quá trình build project. Trong đó kết quả trung gian trong các quá trình build được lưu trữ tại “tmp”. Ngoài ra, trong các quá trình tiếp theo trong “build” sẽ xuất hiện thêm thư mục “downloads” thực hiện chức năng lưu trữ các package được thực hiện trong quá trình “do_fetch”.</li>
<li>Thư mục “components” trong các phiên bản petalinux trước sẽ được sử dụng để chứa source code liên quan đến các customed-component của user. Trong phiên bản này chưa xác định được chức năng của thư mục component.</li>
<li>Xuất hiện thêm Yocto layer “meta-plnx-generated” trong thư mục “project-spec”, chứa các Yocto recipes liên quan đến kernel, core, bsp.</li>
</ul>
<p>Xem thêm Apendix A trong tài liệu ug1144 để biết thêm thông tin về Petalinux project structure.</p>
<h3 id="build-a-new-project-without-internet">Build a new project without Internet</h3>
<p>Để thực hiện build, chạy lệnh “petalinux-build”. </p>
<p><strong>Pre-build configuration</strong></p>
<ul>
<li>
<p>Bản chất của quá trình này là gọi đến target “petalinux-user-image” của Yocto project. </p>
</li>
<li>
<p>“Checking sstate mirror object availability” mất rất nhiều thời gian để thực hiện? -&gt; Tiến hành tắt bỏ chức năng check này trong petalinux-config &gt; Yocto &gt; sstate.</p>
</li>
<li>
<p>Xuất hiện lỗi liên quan đến bitbake nếu dừng quá trình build đột ngột (ví dụ dừng bằng tổ hợp phím Ctl+C). Solution here:</p>
<ul>
<li>Re-init environment:<br />
/home/user/Xilinx/Petalinux/settings.sh
/home/user/Xilinx/Petalinux/components/yocto/source/aarch64/environment-setup-aarch64-xilinx-linux</li>
<li>Remove ./build/bitbake.lock.</li>
</ul>
</li>
</ul>
<p>Các cấu hình của project được lưu trữ ở: project-spec/configs/config</p>
<p><strong>Do_fetch - What is problem?</strong></p>
<p>Trong quá trình build, petalinux sẽ thực hiện lấy các gói có sẵn trong thư mục cài đặt của petalinux, đường dẫn như sau: [Instalation Direction]/components/yocto/downloads. Ngoài ra petalinux tiến hành download từ Internet thêm các gói như:  </p>
<ul>
<li>(1) gcc-source-linaro-6.2-linaro-6.2-r2016.11  </li>
<li>(2) binutils-cross-arm-linaro-2.27-r2016.10  </li>
<li>(3) u-boot-mkimage-native-v2016.03+gitAUTOINC+df61a74e68-r0  </li>
<li>(4) binutils-native-linaro-2.27-r2016.10  </li>
<li>...  </li>
</ul>
<p>Nếu trong quá trình build không có kết nối Internet sẽ dẫn đến các thông báo build lỗi. Ví dụ như: </p>
<ul>
<li>“u-boot-mkimage-native-v2016.03+gitAUTOINC+df61a74e68-r0 do_fetch: Fetcher failure”
Như vậy, bản cài đặt mặc định của petalinux không chứa đủ các gói phần mềm sử dụng cho quá trình Yocto build (?). Cần có thêm các gói sau: </li>
<li>git2_git.linaro.org.toolchain.binutils-gdb.git tương ứng với (2) và (4)</li>
<li>git2_git.linaro.org.toolchain.gcc.git tương ứng với (1)</li>
</ul>
<p><strong>Linaro - what is this?</strong></p>
<p><strong>External kernel - How to?</strong></p>
<h3 id="boot-from-sd-card">Boot from SD card</h3>
<p>Về cơ bản, boot từ SD Card được thực hiện giống với hướng dẫn trong mục <a href="../../projects/zynq/zedboard/zedboard/#bootext4rootfs">Zedboard</a>. Tệp rootfs.cpio được chứa trong thư mục <project>/image/linux/ sẵn sàng cho quá trình đưa lên thẻ nhớ.</p>
<h3 id="mounting-sd-card-in-booting-time">Mounting SD card in booting-time</h3>
<p>Refer <a href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842475/PetaLinux+Yocto+Tips">PetaLinux Yocto Tips</a> (xilinx-wiki.atlassian.net) for step-by-step instructions.</p>
<h2 id="add-user-custom-package">Add user custom package</h2>
<p>Bản chất quản lý gói phần mềm trong petalinux là Yocto project. Mã nguồn của các gói phần mềm có thể được download từ các online repository hoặc lưu trữ trực tiếp trên máy local. Trong mục này sẽ lấy ví dụ về một gói phần mềm phổ biến, hay được sử dụng trong quá trình đánh giá chất lượng mạng: IPERF.</p>
<p>Petalinux sẽ thực hiện tải source code của iperf từ Github sau đó tiến hành cấu hình, build và tích hợp vào hệ thống.</p>
<p>Khi khởi tạo một ứng dụng (apps) mới, một package được tạo tại <code>project-spec/meta-user/recipes-apps</code>. Cấu trúc của một recipes như sau:</p>
<pre><code>vux-iperf/
├── files
│   ├── 0002-Remove-pg-from-profile_CFLAGS.patch
│   └── automake-foreign.patch
├── README
└── vux-iperf.bb
</code></pre>
<p>Trong ví dụ là cấu hình để build bản phần mềm iperf3. Bitbake file cho recipes này được tải tại <a href="https://layers.openembedded.org/layerindex/recipe/32243/">iperf3 3.6</a> (layers.openembedded.org). Nội dung file iperf3_3.6.bb như sau:</p>
<pre><code>SUMMARY = &quot;Network benchmark tool&quot;
HOMEPAGE = &quot;http://software.es.net/iperf/&quot;
SECTION = &quot;console/network&quot;
BUGTRACKER = &quot;https://github.com/esnet/iperf/issues&quot;
AUTHOR = &quot;ESNET &lt;info@es.net&gt;, Lawrence Berkeley National Laboratory &lt;websupport@lbl.gov&gt;&quot;
LICENSE = &quot;BSD&quot;
LIC_FILES_CHKSUM = &quot;file://LICENSE;md5=a9a036136b748453e839c0eb8906ef2e&quot;

DEPENDS = &quot;openssl&quot;

SRC_URI = &quot;git://github.com/esnet/iperf.git \
           file://automake-foreign.patch \
           file://0002-Remove-pg-from-profile_CFLAGS.patch \
           &quot;
SRCREV = &quot;88f3ad87f38762081a6d7127890ff5c3a052b06a&quot;

S = &quot;${WORKDIR}/git&quot;

inherit autotools

PACKAGECONFIG[lksctp] = &quot;ac_cv_header_netinet_sctp_h=yes,ac_cv_header_netinet_sctp_h=no,lksctp-tools&quot;

CFLAGS += &quot;-D_GNU_SOURCE&quot;
EXTRA_OECONF = &quot;--with-openssl=${RECIPE_SYSROOT}${prefix}&quot;
BBCLASSEXTEND = &quot;native&quot;
</code></pre>
<p><em><a href="http://cgit.openembedded.org/meta-openembedded/tree/meta-oe/recipes-benchmark/iperf3/iperf3_3.6.bb?h=master">http://cgit.openembedded.org/meta-openembedded/tree/meta-oe/recipes-benchmark/iperf3/iperf3_3.6.bb?h=master</a></em></p>
<p>Trong file vux-iperf.bb có một số khái niệm và thông tin cần lưu ý như sau.</p>
<p><strong>Đường dẫn đến source code của package</strong></p>
<p>Tham số SRC_URI chứa đường dẫn đến source code của pakcage. Thông qua thông tin chứa trong đường dẫn này, bitbake thực hiện nhiệm vụ do_fetch. </p>
<pre><code>SRC_URI = &quot;git://github.com/esnet/iperf.git \
           file://automake-foreign.patch \
</code></pre>
<p>Trong ví dụ này, SRC_URI chỉ đến một git repository của esnet. Người dùng có thể truy cập trực tiếp vào repo này để xem source code. Ngoài ra SRC_URI chỉ đến một file được lưu trữ local chứa bản patch. Bản patch này có thể được tìm thấy trên openembedded.org.</p>
<p><strong>Revision của source code</strong></p>
<p>Tham số SRCREV chỉ cho bitbake biết được revision nào của source code cần được sử dụng để build package.</p>
<p><code>SRCREV = "88d907f7fb58bfab5d086c5da60c922e1c582c92"</code></p>
<p>Ngoài ra, SRCREV còn có thể cung cấp thêm các thông tin như sau:</p>
<ul>
<li>protocol: giao thức sử dụng để fetch source code (protocol=https...)  </li>
<li>branch: branch mong muốn fetch source code (branch=master...)</li>
</ul>
<p>Tương ứng với mỗi revision chứa một file LICENSE đi kèm với MD5SUM.</p>
<p><code>LIC_FILES_CHKSUM = "file://LICENSE;md5=d098223e44bdd19585315ee75cd9d2d7"</code></p>
<p>Lưu ý rằng LIC_FILES có thể là LICENSE hoặc bất cứ tên khác. </p>
<h2 id="petalinux-imagebbappend">petalinux-image.bbappend</h2>
<p>Lưu trữ tại project-spec/meta-user/recipes-core/images/petalinux-image.bbappend chứa các package có thể được install vào hệ thống. Khi xóa các package trong file này sẽ ảnh hưởng đến petalinux-config -c rootfs.</p>
<h2 id="application-auto-run-at-startup">Application Auto Run at Startup</h2>
<p>Thuật ngữ: <code>update-rc.d</code>, <code>System V</code></p>
<p>Các ứng dụng được cài đặt trên Rootfs dưới dạng các binary và thông thường chỉ được khởi động khi có yêu cầu của người dùng. Trong một số trường hợp ứng dụng cần khởi động trong quá trình booting cùng hệ thống.</p>
<p>Ý tưởng cho phương pháp này là sử dụng Yocto class <code>update-rc.d.bbclass</code> để cài đặt <code>init script</code> dạng <code>System V</code> vào hệ thống. <code>update-rc.d.bbclass</code> sử dụng update-rc.d (a Debian utility) đề "safety install" init script vào hệ thống.</p>
<p>Dưới đây là recipe file của một package yêu cầu Yocto tiến hành cài đặt một <code>init script</code> vào hệ thống. </p>
<pre><code>SUMMARY = &quot;Simple iiod-init application&quot;
SECTION = &quot;PETALINUX/apps&quot;
LICENSE = &quot;MIT&quot;
LIC_FILES_CHKSUM = &quot;file://${COMMON_LICENSE_DIR}/MIT;md5=0835ade698e0bcf8506ecda2f7b4f302&quot;

SRC_URI = &quot;file://iiod-init \
    &quot;

S = &quot;${WORKDIR}&quot;

FILESEXTRAPATHS_prepend := &quot;${THISDIR}/files:&quot;

inherit update-rc.d

INITSCRIPT_NAME = &quot;iiod-init&quot;
INITSCRIPT_PARAMS = &quot;start 99 S .&quot;

do_install() {
    install -d ${D}${sysconfdir}/init.d
    install -m 0755 ${S}/iiod-init ${D}${sysconfdir}/init.d/iiod-init
}

FILES_${PN} += &quot;${sysconfdir}/*&quot;
</code></pre>
<p>Một số điểm lưu ý trong recipe:</p>
<ul>
<li><code>inherit update-rc.d</code>: gọi đến class <code>update-rc.d</code>.</li>
<li><code>INITSCRIPT_NAME</code> &amp; <code>INITSCRIPT_PARAMS</code>: là các biến số cho class <code>update-rc.d</code>. Tham khảo thêm tại <a href="https://www.yoctoproject.org/docs/2.1/ref-manual/ref-manual.html#ref-classes-update-rc.d">update-rc.d.bbclass</a> của Yocto ref-manual.</li>
<li>init script trong <code>recipe</code> này là "iiod-init" được định nghĩa tại biến <code>INITSCRIPT_NAME</code>. Gói cần cung cấp mã nguồn là script <code>iiod-init</code>.</li>
</ul>
<p>Init script cần được viết theo <code>System V init</code> style. Về cơ bản script cần cung cấp được các phương thức: <code>start</code>, <code>stop</code> và <code>restart</code>. Các phương thức này được sử dụng để tác động đến chương trình.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Vu Tang.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.2b46852b.min.js"></script>
      
    
  </body>
</html>