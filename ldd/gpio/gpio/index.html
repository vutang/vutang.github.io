



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://www.vutang.github.io/ldd/gpio/gpio/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>GPIO - Vu Tang's Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.572ca0f0.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#general-purpose-input-or-output" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.vutang.github.io/" title="Vu Tang's Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Vu Tang's Docs
              </span>
              <span class="md-header-nav__topic">
                GPIO
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.vutang.github.io/" title="Vu Tang's Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Vu Tang's Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General Technote
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General Technote
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../technote/mkdocs/mkdocs-notes/" title="Mkdocs Tool" class="md-nav__link">
      Mkdocs Tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../technote/markdown/markdown/" title="Markdown Language" class="md-nav__link">
      Markdown Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../technote/shellscript/shellscript/" title="Shell Script" class="md-nav__link">
      Shell Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../technote/python/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Book & Materials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Book & Materials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../books/c_books/" title="C Programing" class="md-nav__link">
      C Programing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../books/linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../books/device_driver/" title="Linux Device Driver" class="md-nav__link">
      Linux Device Driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../books/linux_kernel/" title="Linux Kernel" class="md-nav__link">
      Linux Kernel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../books/es_linux/" title="Linux Embedded" class="md-nav__link">
      Linux Embedded
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../books/others/" title="Others" class="md-nav__link">
      Others
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Linux ES Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Linux ES Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../lnx_es/es/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../lnx_es/hw_platform/" title="HW Platforms" class="md-nav__link">
      HW Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../lnx_es/cmn_tool/" title="Common Tools" class="md-nav__link">
      Common Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../lnx_es/ptlnx/" title="Xilinx Petalinux" class="md-nav__link">
      Xilinx Petalinux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../lnx_es/yocto/" title="Yocto" class="md-nav__link">
      Yocto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../technote/tips/tips/" title="Tips" class="md-nav__link">
      Tips
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Linux Device Driver
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Linux Device Driver
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kernel_module/" title="Kernel Module" class="md-nav__link">
      Kernel Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../platform_dev/platform_device/" title="Platform Device" class="md-nav__link">
      Platform Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../spi_dev/spi_dev/" title="SPI Device" class="md-nav__link">
      SPI Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../spi_dev/spi_advance/" title="SPI Device Advance" class="md-nav__link">
      SPI Device Advance
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        GPIO
      </label>
    
    <a href="./" title="GPIO" class="md-nav__link md-nav__link--active">
      GPIO
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#driver-perspective" title="Driver perspective" class="md-nav__link">
    Driver perspective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#userspace-software-perspective" title="Userspace software perspective" class="md-nav__link">
    Userspace software perspective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-perspective" title="Hardware perspective" class="md-nav__link">
    Hardware perspective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../uart/uart/" title="UART" class="md-nav__link">
      UART
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Linux Kernel Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Linux Kernel Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux_kernel_dev/kernel_data_structure/" title="Kernel Data Structure" class="md-nav__link">
      Kernel Data Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux_kernel_dev/kernel_user_space/" title="Kernel Space, User Space Interfaces" class="md-nav__link">
      Kernel Space, User Space Interfaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      FPGA
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        FPGA
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../fpga/timing_analysis/timing_analysis/" title="Static Timing Analysis" class="md-nav__link">
      Static Timing Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../fpga/x_ipcore/xipcore/" title="Xilinx IPCore" class="md-nav__link">
      Xilinx IPCore
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../projects/zedboard/zedboard/" title="Zedboard" class="md-nav__link">
      Zedboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../projects/zc706/" title="ZC706" class="md-nav__link">
      ZC706
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../projects/pi3b/" title="Raspberrypi 3B" class="md-nav__link">
      Raspberrypi 3B
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../lnx_es/u-boot/" title="Zynq from scratch" class="md-nav__link">
      Zynq from scratch
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../bookmarks/bookmarks/" title="Bookmarks" class="md-nav__link">
      Bookmarks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../whatnext/" title="What's next" class="md-nav__link">
      What's next
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../about/about/" title="About me" class="md-nav__link">
      About me
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#driver-perspective" title="Driver perspective" class="md-nav__link">
    Driver perspective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#userspace-software-perspective" title="Userspace software perspective" class="md-nav__link">
    Userspace software perspective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-perspective" title="Hardware perspective" class="md-nav__link">
    Hardware perspective
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="general-purpose-input-or-output">General Purpose Input or Output</h1>
<p><img alt="gpio-subsystem" src="../img/gpio-subsystem-blockdiagram.png" /></p>
<h2 id="driver-perspective">Driver perspective</h2>
<p>Về cơ bản, các subsytem của Linux Kernel như SPI, I2C, GPIO ... đều hoạt động với mô hình (concept) tương tự nhau. Các tài nguyên phần cứng được đăng ký với Kernel, các module khác của Kernel muốn truy cập đến các phần cứng này sẽ cần phải gửi yêu cầu.</p>
<ul>
<li><strong>GPIO Controlller Driver</strong>: thực hiện đăng ký một <code>struct gpio_chip</code> với Linux kernel, khai báo các tài nguyên có thể cung cấp được của GPIO controller. <code>gpio_chip</code> cung cấp các phương thức như <code>request</code>, <code>set</code>, <code>get</code>... và thông qua các phương thức này có thể tác động đến phần cứng GPIO.</li>
</ul>
<pre><code>gpio@e000a000 {
    compatible = &quot;xlnx,zynq-gpio-1.0&quot;;
    #gpio-cells = &lt;0x2&gt;;
    clocks = &lt;0x1 0x2a&gt;;
    gpio-controller;
    interrupt-parent = &lt;0x3&gt;;
    interrupts = &lt;0x0 0x14 0x4&gt;;
    reg = &lt;0xe000a000 0x1000&gt;;
    ...
};
</code></pre>

<p><em>Zynq GPIO Controller is described as a node in Device Tree</em>.</p>
<ul>
<li>
<p><strong>User modules</strong>: các module khác trong trong trường hợp muốn sử dụng một pin GPIO thuộc quyền quản lý của GPIO Controller sẽ gửi yêu cầu đến kernel để xin tài nguyên. GPIO Subsystem cung cấp các APIs như <code>gpio_request_one</code> và <code>gpio_request_array</code> để các module có thể yêu cầu tài nguyên. Nếu quá trình yêu cầu tài nguyên thành công, module sẽ điều khiển GPIO thông qua các APIs như <code>gpio_set_value</code> và <code>gpio_get_value</code>.</p>
</li>
<li>
<p><strong>Liên kết giữa Other module và Controller driver</strong>:<br />
<code>gpio_number &lt;-1-&gt; struct gpio_desc *&lt;-2-&gt; struct gpio_chip *</code><br />
Quá trình 1, từ gpio_number có thể gọi đến gpio_desc bằng các API như <code>gpio_to_desc</code>. Về bản chất, gpio_desc được lưu trữ bằng một mảng tĩnh: <code>static struct gpio_desc gpio_desc[ARCH_NR_GPIOS];</code> trong đó gpio_number là chỉ số của mảng tĩnh này, do đó truy cập đến gpio_desc của một gpio_number đơn giản là truy cập đến một phần tử của mảng.<br />
Quá trình 2, gpio_desc chứa con trỏ trỏ đến <code>struct gpio_chip   *chip;</code>, do đó từ gpio_desc có thể dễ dàng truy cập được đến gpio_chip (desc-&gt;chip).</p>
</li>
</ul>
<p>Quy trình gửi yêu cầu và sử dụng GPIO được mô tả trong một tài liệu khoa học trong mục References.</p>
<h2 id="userspace-software-perspective">Userspace software perspective</h2>
<p><strong>Truy cập trực tiếp từ các device attribute trong sysfs</strong></p>
<ul>
<li>GPIO Class</li>
</ul>
<p>Trong gpiolib-sysfs.c khai báo <code>struct class gpio_class</code> trong hàm <code>__init</code>:</p>
<p><code>status = class_register(&amp;gpio_class);</code></p>
<p>Với thuộc tính <code>gpio_class_attrs</code>:</p>
<pre><code>static struct class_attribute gpio_class_attrs[] = {
    __ATTR(export, 0200, NULL, export_store),
    __ATTR(unexport, 0200, NULL, unexport_store),
    __ATTR_NULL,
};

static struct class gpio_class = {
    .name =     &quot;gpio&quot;,
    .owner =    THIS_MODULE,

    .class_attrs =  gpio_class_attrs,
};
</code></pre>

<p>Kết quả trong <code>sys/class/gpio/</code> xuất hiện hai thuộc tính <code>export/unexport</code>.</p>
<pre><code>/sys/class/gpio# ls -l
--w-------    1 root     root          4096 Jan  1 00:00 export
lrwxrwxrwx    1 root     root             0 Jan  1 00:00 gpiochip0 -&gt; ../../devices/soc0/amba/e000a000.gpio/gpio/gpiochip0
--w-------    1 root     root          4096 Jan  1 00:00 unexport

</code></pre>

<p>Hai thuộc tính <code>export/unexport</code> được sử dụng để yêu cầu/hủy yêu cầu đối với một GPIO.</p>
<ul>
<li>GPIO controller device</li>
</ul>
<p>Trong quá trình controller driver đăng ký GPIO với Kernel (gpiolib), các attribute của <code>gpiochip</code> device được khởi tạo thông qua <code>int gpiochip_export(struct gpio_chip *chip)</code>. Kết quả là một device được khởi tạo:</p>
<p><code>/sys/devices/soc0/amba/e000a000.gpio/gpio/gpiochip0</code></p>
<p>Các thuộc tính bên trong device này có dạng như sau</p>
<pre><code>-r--r--r--    1 root     root          4096 Jan  1 00:00 base
lrwxrwxrwx    1 root     root             0 Jan  1 00:00 device -&gt; ../../../e000a000.gpio
-r--r--r--    1 root     root          4096 Jan  1 00:00 label
-r--r--r--    1 root     root          4096 Jan  1 00:00 ngpio
drwxr-xr-x    2 root     root             0 Jan  1 00:00 power
lrwxrwxrwx    1 root     root             0 Jan  1 00:00 subsystem -&gt; ../../../../../../class/gpio
-rw-r--r--    1 root     root          4096 Jan  1 00:00 uevent

</code></pre>

<ul>
<li>GPIO Pin Device</li>
</ul>
<p>Để có thể sử dụng được một pin GPIO, cần có quá trình gửi yêu cầu đến hệ thống. Quá trình này có thể sử dụng thông qua API <code>gpio_request_array</code> hoặc sử dụng các attributes <code>export/unexport</code>. Về cơ bản hai quá trình này sẽ thực hiện gọi đến API <code>int gpiod_export(struct gpio_desc *desc, bool direction_may_change)</code> để tạo ra các GPIO device.</p>
<pre><code>dev = device_create(&amp;gpio_class, desc-&gt;chip-&gt;dev, MKDEV(0, 0),
                desc, ioname ? ioname : &quot;gpio%u&quot;,
                desc_to_gpio(desc));
</code></pre>

<p>Ví dụ với gpioN, device xuất hiện trong hệ thống như sau:</p>
<p><code>/sys/devices/soc0/amba/e000a000.gpio/gpio/gpioN</code></p>
<p>Các thuộc tính đó bao gồm:</p>
<pre><code>/sys/devices/soc0/amba/e000a000.gpio/gpio/gpio1# ls -l
-rw-r--r--    1 root     root          4096 Jan  3 22:42 active_low
lrwxrwxrwx    1 root     root             0 Jan  3 22:42 device -&gt; ../../../e000a000.gpio
-rw-r--r--    1 root     root          4096 Jan  3 22:42 direction
-rw-r--r--    1 root     root          4096 Jan  3 22:42 edge
drwxr-xr-x    2 root     root             0 Jan  3 22:42 power
lrwxrwxrwx    1 root     root             0 Jan  3 22:42 subsystem -&gt; ../../../../../../class/gpio
-rw-r--r--    1 root     root          4096 Jan  3 22:42 uevent
-rw-r--r--    1 root     root          4096 Jan  3 22:42 value
</code></pre>

<p><strong>Truy cập thông qua các user module</strong></p>
<p>Về cơ bản, quá trình truy cập một chân GPIO thông qua một user module cũng được thực hiện tương tự như truy cập trực tiếp qua các thuộc tính của <code>gpio class</code> và <code>gpio device</code>. Quá trình này chỉ khác nhau ở phương thức giao tiếp giữa User Space và Kernel Space. Thay vì trực tiếp sử dụng các thuộc tính của <code>gpio class</code> thì các ứng dụng user space sẽ tương tác qua các thuộc tính của User module (có thể là IOCTL hoặc device attributes).</p>
<h2 id="hardware-perspective">Hardware perspective</h2>
<p><strong>Zynq7000</strong></p>
<p>In Zynq, GPIO controller registers are memory mapped at base address 0xe000a000.</p>
<p><img alt="gpio-pin-in-zynq" src="../img/gpio-pin-in-zynq.png" /></p>
<p><em>Figure. GPIO pin in Zynq7000</em></p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://lwn.net/Articles/532714/">GPIO in the kernel: an introduction</a> - lwn.net</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../spi_dev/spi_advance/" title="SPI Device Advance" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                SPI Device Advance
              </span>
            </div>
          </a>
        
        
          <a href="../../uart/uart/" title="UART" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                UART
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Vu Tang.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.b41f3d20.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>