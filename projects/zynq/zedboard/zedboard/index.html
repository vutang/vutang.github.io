



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://www.vutang.github.io/projects/zynq/zedboard/zedboard/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Zedboard - Vu Tang's Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#zedboard" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.vutang.github.io/" title="Vu Tang's Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Vu Tang's Docs
            </span>
            <span class="md-header-nav__topic">
              
                Zedboard
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.vutang.github.io/" title="Vu Tang's Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Vu Tang's Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General Technote
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General Technote
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../technote/mkdocs/mkdocs-notes/" title="Mkdocs Tool" class="md-nav__link">
      Mkdocs Tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../technote/markdown/markdown/" title="Markdown Language" class="md-nav__link">
      Markdown Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../technote/shellscript/shellscript/" title="Shell Script" class="md-nav__link">
      Shell Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../technote/python/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Book & Materials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Book & Materials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/c_books/" title="C Programing" class="md-nav__link">
      C Programing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/linux/" title="Linux Programing" class="md-nav__link">
      Linux Programing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/device_driver/" title="Linux Device Driver" class="md-nav__link">
      Linux Device Driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/linux_kernel/" title="Linux Kernel" class="md-nav__link">
      Linux Kernel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/es_linux/" title="Linux Embedded" class="md-nav__link">
      Linux Embedded
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/dsa/dsa_toc/" title="Data Structure & Algorithms" class="md-nav__link">
      Data Structure & Algorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../books/others/" title="Others" class="md-nav__link">
      Others
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Programming
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Programming
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../programming/C/cprogramming/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../programming/dsa/dsa/" title="DSA" class="md-nav__link">
      DSA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../programming/sql/mysql/" title="SQL" class="md-nav__link">
      SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../programming/lnx/lpi/" title="Linux Programming Interfaces" class="md-nav__link">
      Linux Programming Interfaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../programming/dsg_patterns/" title="Design Patterns" class="md-nav__link">
      Design Patterns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../programming/multi-threaded-programming/" title="Multi-threads" class="md-nav__link">
      Multi-threads
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Linux General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Linux General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx/linux/" title="Unsorted" class="md-nav__link">
      Unsorted
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Linux ES Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Linux ES Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_es/es/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_es/hw_platform/" title="HW Platforms" class="md-nav__link">
      HW Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_es/cmn_tool/" title="Common Tools" class="md-nav__link">
      Common Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_es/ptlnx/" title="Xilinx Petalinux" class="md-nav__link">
      Xilinx Petalinux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_es/yocto/" title="Yocto" class="md-nav__link">
      Yocto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_es/tips/tips/" title="Tips" class="md-nav__link">
      Tips
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Linux Device Driver
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Linux Device Driver
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/kernel_module/" title="Kernel Module" class="md-nav__link">
      Kernel Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/platform_dev/platform_device/" title="Platform Device" class="md-nav__link">
      Platform Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/spi_dev/spi_dev/" title="SPI Device" class="md-nav__link">
      SPI Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/spi_dev/spi_advance/" title="SPI Device Advance" class="md-nav__link">
      SPI Device Advance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/gpio/gpio/" title="GPIO" class="md-nav__link">
      GPIO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/uart/uart/" title="UART" class="md-nav__link">
      UART
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/jesd/jesd/" title="JESD" class="md-nav__link">
      JESD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/iio/iio.md" title="IIO" class="md-nav__link">
      IIO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_ldd/pci/pci/" title="PCI" class="md-nav__link">
      PCI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Linux Kernel Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Linux Kernel Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_kernel/kernel_data_structure/" title="Kernel Data Structure" class="md-nav__link">
      Kernel Data Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lnx_kernel/kernel_user_space/" title="Kernel Space, User Space Interfaces" class="md-nav__link">
      Kernel Space, User Space Interfaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      FPGA
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        FPGA
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../fpga/timing_analysis/timing_analysis/" title="Static Timing Analysis" class="md-nav__link">
      Static Timing Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../fpga/x_ipcore/xipcore/" title="Xilinx IPCore" class="md-nav__link">
      Xilinx IPCore
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../zynq/" title="Zynq" class="md-nav__link">
      Zynq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../imx8/imx8/" title="IMX8" class="md-nav__link">
      IMX8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../pi3b/" title="Raspberrypi 3B" class="md-nav__link">
      Raspberrypi 3B
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../bookmarks/bookmarks/" title="Bookmarks" class="md-nav__link">
      Bookmarks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../whatnext/" title="What's next" class="md-nav__link">
      What's next
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../about/about/" title="About me" class="md-nav__link">
      About me
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-zedboard" title="About ZedBoard" class="md-nav__link">
    About ZedBoard
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-from-sd-card-with-ext4-filesystem" title="Boot from SD Card with ext4 filesystem" class="md-nav__link">
    Boot from SD Card with ext4 filesystem
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xsct-in-zedboard" title="XSCT in Zedboard" class="md-nav__link">
    XSCT in Zedboard
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="zedboard">Zedboard</h1>
<p><img alt="zedboard" src="../img/zedboard.jpg" /></p>
<h2 id="about-zedboard">About ZedBoard</h2>
<p><a href="http://zedboard.org/product/zedboard">ZedBoard™</a> is a complete development kit for designers interested in exploring designs using the Xilinx Zynq®-7000 All Programmable SoC .</p>
<h2 id="boot-from-sd-card-with-ext4-filesystem">Boot from SD Card with ext4 filesystem</h2>
<p><a name="bootext4rootfs"></a></p>
<p><a href="https://1drv.ms/w/s!Ai73O1i3QXDegSRrRM90Eg6kw66H">Origin Note</a></p>
<p>Tài liệu này mô tả các khởi động Zed từ SD card với rootfs được lưu trữ trên một phân vùng định dạng ext4. Phương pháp này có thể được sử dụng cho các board zynq khác như ZC706, PicoZed.</p>
<p><strong>Chuẩn bị images</strong></p>
<p>Trong tài liệu <a href="https://www.xilinx.com/support/documentation/sw_manuals/petalinux2015_4/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a> có hướng dẫn quá trình cấu hình để có thể khởi động Zynq7000 từ SD Card. Trong hướng dẫn này cần lưu ý đến 2 điểm sau:</p>
<ul>
<li>
<p>Thiết lập petalinux project để các image được package dưới dạng có
thể boot được từ SD Card.</p>
<p><code>petalinux-config</code></p>
</li>
<li>
<p>Tạo file rootfs.cpio bằng mã lệnh sau</p>
<p><code>petalinux-package \--image -c rootfs \--format initramfs</code></p>
</li>
</ul>
<p>Nếu sử dụng lệnh package để tạo rootfs.cpio xuất hiện lỗi sau:</p>
<blockquote>
<p>[INFO ] package rootfs.cpio to /tmp/petalinux/images/linux<br />
 ERROR: Linux kernel gen_init_cpio /tmp/petalinux/build/linux/kernel/usr/gen_init_cpio doesn\'t exits! Please build Linux kernel first!</p>
<p>make[1]: *** [package-rootfs-cpio] Fehler 255</p>
<p>make: *** [package-rootfs-initramfs] Fehler 2<br />
 ERROR: Failed to package component linux/rootfs</p>
</blockquote>
<p><em>*** Need to use extention to emphasize error notes, see in <a href="../../../../technote/mkdocs/mkdocs-notes/">Mkdocs Tool</a></em></p>
<p>Trong diễn đàn của Xilinx (<a href="https://forums.xilinx.com/t5/Embedded-Linux/Error-when-rootfs-is-placed-on-SD-card/td-p/684101">link</a>) có thảo luận về phương pháp để khắc phục được lỗi trên. Bao gồm các bước xử lý như sau:</p>
<ul>
<li>Tắt chế độ automatic kernel configuration</li>
</ul>
<blockquote>
<p>petalinux-config</p>
<p>Image Packaging Configuration ---> Root filesystem type = SD card</p>
<p>Auto Config Settings ---> [ ] kernel autoconfig</p>
</blockquote>
<ul>
<li>Bật chế độ hỗ trọ INITRAMFS trong cấu hình của kernel</li>
</ul>
<blockquote>
<p>$ petalinux-config -c kernel</p>
<p>General setup -&gt;</p>
<p>[*] Initial RAM filesystem and RAM disk (initramfs/initrd) support </p>
<p>() Initramfs source file(s)</p>
</blockquote>
<p><strong>Kernel Args</strong></p>
<p>Kernel Args bên trong device-tree chứa một số thông tin để kernel có thể tìm kiếm được chính xác root filesystem cần được sử dụng cho hệ thống. Để kernel có thể tìm đến được phân vùng rootfs trên SD card vừa được khởi tạo cần thiết lập kernel args như sau:</p>
<p><code>bootargs = "console=ttyPS0,115200 earlyprint root=/dev/mmcblk0p2 rw rootwait";</code></p>
<p>Khi khởi động, kernel sẽ tìm đến phân vùng <code>/dev/mmcblk0p2</code> để mounting rootfs, sau đó khởi động tiến trình <code>init</code>. Do trong kernel args không khai báo định dạng của phân vùng rootfs này nên kernel sẽ tiến hành thử mounting phân vùng với các định dạng khác nhau và tìm kiếm đến định dạng phù hợp (ở đây là <code>ext4</code>).</p>
<p>Tìm hiểu thêm thông tin về các tham số trong cấu hình trên ở chuyên mục tìm hiểu về Kernel Args.</p>
<p><strong>Phân vùng cho SD card</strong></p>
<p>Cần chuẩn bị SD Card với 02 phân vùng:</p>
<ul>
<li>
<p>BOOT: được format ở định dạng FAT32 chứa BOOT.BIN (bao gồm FBSL, PL
Bitstream, U-boot) và image.ub (Linux kernel và Device Tree).</p>
</li>
<li>
<p>rootfs: được format ở định dạng ext4 chứa root filesystem.</p>
</li>
</ul>
<p>Quá trình chuẩn bị phân vùng trên SD Card này sẽ được tiến hành đơn giản
bằng các GUI Tool như <a href="https://gparted.org/">GParted</a>.</p>
<p>Ngoài ra có thể sử dụng tổ hợp CLI tool: fdisk &amp; mkfs.vfat &amp; mkfs.ext4.
Phương pháp sử dụng bộ công cụ này được mô tả chi tiết trong <a href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842385/How+to+format+SD+card+for+SD+boot">Wikipedia</a>
của Xilinx.</p>
<p>Kết quả của quá trình phân vùng và format này như sau:</p>
<p><img alt="sdpartition" src="../img/sd-card-partition.png" /></p>
<p><em>Figure. SD Card Partitions</em></p>
<p><strong>Cài đặt boot image và rootfs lên SD card</strong></p>
<p>Kết quả sau khi thực hiện xong các bước chuẩn bị liên quan đến images và
SD Card:</p>
<ul>
<li>
<p>Các file images: BOOT.BIN, image.ub và rootfs.cpio</p>
</li>
<li>
<p>SD Card với hai phân vùng: BOOT và rootfs.</p>
</li>
</ul>
<p>Các images và filesystem phải được cài đặt lên SD Card trước khi board
có thể khởi động được từ SD Card.</p>
<p><strong><em>Bootloader &amp;&amp; Kernel</em></strong></p>
<p>Quá trình cài đặt bootloader và Linux kernel là quá trình copy BOOT.BIN
và image.ub lên phân vùng BOOT của sdcard. BootROM của zynq đủ mạnh để
có thể tìm kiếm được zynq_fsbl.elf trên phân vùng định dạng FAT32 để
khởi động.</p>
<p><strong><em>Rootfs</em></strong></p>
<p>Riêng rootfs đang được đóng gói ở file rootfs.cpio. Sử dụng ứng dụng pax
để tháo dỡ filesystem đang được đóng gói ở định dạng cpio.</p>
<p><code>cp images/linux/rootfs.cpio /media/rootfs/</code></p>
<p><code>cd /media/rootfs</code></p>
<p><code>sudo pax -rvf rootfs.cpio</code></p>
<p>Ngoài ra, <code>rootfs.cpio</code> có thể được tháo dỡ bằng mã lệnh <code>cpio</code>. Trong một số trường hợp hệ nhúng không tích hợp sẵn gói <code>pax</code>, <code>cpio</code> sẽ là một thay thế cần thiết. Cú pháp như sau:</p>
<p><code>cpio -i -F rootfs.cpio</code></p>
<p><strong>Phân tích và kết luận</strong></p>
<p>Trong quá trình chuẩn bị SD Card xuất hiện các thuật ngữ. Trong mục này
sẽ đi phân tích và giải thích các thuật ngữ đó.</p>
<p><strong><em>CPIO</em></strong></p>
<p>Trong hệ điều hành Linux xuất hiện khái niệm <strong>archive (/ˈɑːkaɪv/) file</strong>, là kết quả
của quá trình đóng gói nhiều file dữ liệu thành một file thống nhất
(không có quá trình nén dữ liệu). Mục đích của quá trình đóng gói này là
dễ dàng cho quá trình lưu trữ cũng như trao đổi dữ liệu. Archive file
cũng được sử dụng làm đầu vào cho các trình nén dữ liệu.</p>
<p>Archive file được đóng gói bằng các file archiver. Trong Unix-like
system, các file archiver phổ biến như: tar, ar, cpio.</p>
<p>Rootfs kết quả của bước 1 đang được đóng gói dưới dạng archive file -
cpio. Quá trình cài đặt rootfs lên phân vùng rootfs trên SD Card bản
chất là quá trình tháo dỡ các archive file trở về các file phân biệt ban
đầu.</p>
<p>Quá trình extract này có thể được thực hiện bởi các Linux tool như: cpio
hoặc pax. Trong hướng dẫn của Xilinx sử dụng pax để tháo dỡ rootfs.</p>
<p><strong><em>Fs format: fat32 và ext4</em></strong></p>
<p>File system là cách mà một hệ thống file được tổ chức trên các bộ nhớ
lưu trữ. Các bộ nhớ lưu trữ có thể là: <strong>disk file system</strong> hoặc <strong>flash file
system</strong>.</p>
<p>Fat32 và ext4 là tên của các dạng file system được tổ chức phổ biến trên
các dòng disk file system như SD Card trong bài viết này là một ví dụ.
Ngoài ra trong quá trình làm việc với Rootfs của zynq có thể sử dụng đến
JFFS2 format là một định dạng file system sử dụng cho các bộ nhớ flash.</p>
<h2 id="xsct-in-zedboard">XSCT in Zedboard</h2>
<p><a name="zedboardxsct"></a></p>
<p>XSCT (Xilinx Software Command-Line Tool) là giao diện CLI sử dụng để tương tác với Xilinx SDK. Sử dụng XSCT có thể kết nối đến chip Zynq thông qua giao diện JTAG để thực hiện được các nhiệm vụ sau:</p>
<ul>
<li>Cấu hình PS7_INIT (cấu hình clock, ddr controller...)</li>
<li>Nạp bitstream cho chip FPGA</li>
<li>Tiến hành chạy một chương trình trên ARM CPU</li>
</ul>
<p><strong>Khởi động XSCT</strong></p>
<p>Cách thông thường và phổ biến nhất với người phát triển là khởi động XSCT từ GUI của SDK. Từ thanh Toolbar chọn: Xilinx &gt; XSCT Console.</p>
<p>Ngoài ra, người dùng Linux có thể khởi động trực tiếp từ terminal bằng binary cung cấp bởi SDK. Điểm mạnh của phương pháp này là tận dụng được các yếu tố gợi nhắc từ terminal.</p>
<pre><code>&gt; cd  &lt;SDX-installation-dir&gt;/SDK/2018.2/bin/
&gt; ./xsct
</code></pre>

<p><strong>Quá trình khởi chạy một ứng dụng</strong></p>
<ul>
<li>
<p>Kết nối đến targets bằng lệnh <code>connect</code> và nhóm lệnh <code>targets</code></p>
<p><code>&gt; connect</code></p>
<p>Sau khi kết nối, các targets được hiển thị bằng lệnh <code>targets</code></p>
</li>
</ul>
<pre><code>    xsct% targets
      1  APU
         2* ARM Cortex-A9 MPCore #0 (Running)
         3  ARM Cortex-A9 MPCore #1 (Suspended)
      4  xc7z020
</code></pre>

<ul>
<li>Thiết lập ban đầu cho hệ thống<br />
    Tìm đến file ps7_init.tcl của hệ thống và tiến hành (trong một số trường hợp cần tiến hành reset target bằng cách chạy lệnh <code>rst</code>):</li>
</ul>
<pre><code>    &gt; source ps7_init.tcl // khai báo các phương thức định nghĩa trong ps7_init.tcl
    &gt; ps7_init // chạy ps7_init
    &gt; ps7_post_config // chạy ps7_post_config

</code></pre>

<ul>
<li>Tải chương trình và chạy</li>
</ul>
<pre><code>    &gt; dow &lt;elf file&gt;
    &gt; con
</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Vu Tang.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>