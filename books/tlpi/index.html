



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://www.vutang.github.io/books/tlpi/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>The Linux Programming Interaface - Vu Tang's Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.572ca0f0.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#the-linux-programming-interaface" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.vutang.github.io/" title="Vu Tang's Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Vu Tang's Docs
              </span>
              <span class="md-header-nav__topic">
                The Linux Programming Interaface
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.vutang.github.io/" title="Vu Tang's Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Vu Tang's Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General Technote
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General Technote
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../technote/mkdocs/mkdocs-notes/" title="Mkdocs Tool" class="md-nav__link">
      Mkdocs Tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../technote/markdown/markdown/" title="Markdown Language" class="md-nav__link">
      Markdown Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../technote/shellscript/shellscript/" title="Shell Script" class="md-nav__link">
      Shell Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../technote/python/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../technote/virutal_machine/virtual_box.md" title="Virtual Machine" class="md-nav__link">
      Virtual Machine
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Book & Materials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Book & Materials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../c_books/" title="C Programing" class="md-nav__link">
      C Programing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/" title="Linux Programing" class="md-nav__link">
      Linux Programing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../device_driver/" title="Linux Device Driver" class="md-nav__link">
      Linux Device Driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux_kernel/" title="Linux Kernel" class="md-nav__link">
      Linux Kernel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../es_linux/" title="Linux Embedded" class="md-nav__link">
      Linux Embedded
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dsa/dsa_toc/" title="Data Structure & Algorithms" class="md-nav__link">
      Data Structure & Algorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../others/" title="Others" class="md-nav__link">
      Others
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Programming
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Programming
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/C/cprogramming/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/dsa/dsa/" title="DSA" class="md-nav__link">
      DSA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/sql/mysql/" title="SQL" class="md-nav__link">
      SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/lnx/lpi/" title="Linux Programming Interfaces" class="md-nav__link">
      Linux Programming Interfaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/dsg_patterns/" title="Design Patterns" class="md-nav__link">
      Design Patterns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/multi-threaded-programming/" title="Multi-threads" class="md-nav__link">
      Multi-threads
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Linux General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Linux General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx/linux/" title="Unsorted" class="md-nav__link">
      Unsorted
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx/cmds/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Linux ES Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Linux ES Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/es/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/hw_platform/" title="HW Platforms" class="md-nav__link">
      HW Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/cmn_tool/" title="Common Tools" class="md-nav__link">
      Common Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/version_control/git/" title="Git" class="md-nav__link">
      Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/ptlnx/" title="Xilinx Petalinux" class="md-nav__link">
      Xilinx Petalinux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/yocto/" title="Yocto" class="md-nav__link">
      Yocto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_es/tips/tips/" title="Tips" class="md-nav__link">
      Tips
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Linux Device Driver
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Linux Device Driver
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/kernel_module/" title="Kernel Module" class="md-nav__link">
      Kernel Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/platform_dev/platform_device/" title="Platform Device" class="md-nav__link">
      Platform Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/spi_dev/spi_dev/" title="SPI Device" class="md-nav__link">
      SPI Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/spi_dev/spi_advance/" title="SPI Device Advance" class="md-nav__link">
      SPI Device Advance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/gpio/gpio/" title="GPIO" class="md-nav__link">
      GPIO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/uart/uart/" title="UART" class="md-nav__link">
      UART
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/jesd/jesd/" title="JESD" class="md-nav__link">
      JESD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_ldd/audio/linux_audio/" title="Audio" class="md-nav__link">
      Audio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Linux Kernel Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Linux Kernel Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_kernel/kernel_data_structure/" title="Kernel Data Structure" class="md-nav__link">
      Kernel Data Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lnx_kernel/kernel_user_space/" title="Kernel Space, User Space Interfaces" class="md-nav__link">
      Kernel Space, User Space Interfaces
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      FPGA
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        FPGA
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../fpga/timing_analysis/timing_analysis/" title="Static Timing Analysis" class="md-nav__link">
      Static Timing Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fpga/x_ipcore/xipcore/" title="Xilinx IPCore" class="md-nav__link">
      Xilinx IPCore
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/pcie/pcie/" title="PCIe" class="md-nav__link">
      PCIe
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/zynq/zynq/" title="Zynq" class="md-nav__link">
      Zynq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/imx8/imx8/" title="IMX8" class="md-nav__link">
      IMX8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/pi3b/" title="Raspberrypi 3B" class="md-nav__link">
      Raspberrypi 3B
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../bookmarks/bookmarks/" title="Bookmarks" class="md-nav__link">
      Bookmarks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../whatnext/" title="What's next" class="md-nav__link">
      What's next
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/about/" title="About me" class="md-nav__link">
      About me
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#c20-signal-fundametal-concepts" title="C20: Signal - fundametal concepts" class="md-nav__link">
    C20: Signal - fundametal concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c24-process-creation" title="C24: Process Creation" class="md-nav__link">
    C24: Process Creation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c25-process-termination" title="C25: Process Termination" class="md-nav__link">
    C25: Process Termination
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c26-monitoring-child-processes" title="C26: Monitoring Child Processes" class="md-nav__link">
    C26: Monitoring Child Processes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c29-threads-introduction" title="C29: Threads - Introduction" class="md-nav__link">
    C29: Threads - Introduction
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="the-linux-programming-interaface">The Linux Programming Interaface</h1>
<h2 id="c20-signal-fundametal-concepts">C20: Signal - fundametal concepts</h2>
<p><strong>Định nghĩa</strong></p>
<p>Signal là tín hiệu Kernel sử dụng để gửi đến cho một process, hoặc cũng có thể là một tín hiệu được gửi từ một process sang process khác. Trong một số trường hợp, process có thể gửi "signal" đến chính nó. Quá trình "send" một signal được "response" bởi process bằng một loạt các hành động, gọi là "signal reactions".</p>
<p>Signal được đánh dấu bằng các số nguyên trong signal.h. Một số các signal được định nghĩa mặc định các "reaction". Các reaction này có thể định nghĩa lại bằng các "user signal handler" bởi programmer -&gt; hoạt động này gọi là "disposition".</p>
<p><strong>Gửi signal bằng "kill" system call</strong></p>
<p>Cơ bản, kill() có thể gửi một tín hiệu bất kì đến một hoặc một nhóm process. Nhưng tại sao lại được đặt tên là kill()?</p>
<h2 id="c24-process-creation">C24: Process Creation</h2>
<p>The <strong><span style="color:red">fork()</span></strong> creates a new process, the <em>child</em>, which is an almost exact duplicate of the calling process, the <em>parent</em>.</p>
<p>Conceptually, we can consider fork() as creating copies of the parent’s text, data, heap, and stack segments -&gt; Trong một số trường hợp, quá trình copy toàn bộ dữ liệu này sẽ <strong>wasteful</strong>. Đặc biệt khi <code>child</code> process gọi đến các hàm <code>exec()</code>, <code>exec()</code> tiến hành thay thế toàn bộ các vùng nhớ của <code>parrent</code> process bằng vùng nhớ mới -&gt; xuất hiện kỹ thuật <strong>copy-and-write</strong> trong quá trình copy dữ liệu.</p>
<p>Ngoài ra, để tránh lãng phí trong quá trình copy dữ liệu, system call <strong><span style="color:red">vfork()</span></strong> mới được phát triển, đặc biệt sử dụng trong các trường hợp <code>child</code> process gọi đến <code>exec()</code>. Two features distinguish the vfork() system call from fork() and make it more efficient:</p>
<ul>
<li>No duplication of virtual memory pages or page tables is done for the child process. Instead, the child shares the parent’s memory until it either performs a successful exec() or calls _exit() to terminate.</li>
<li>Execution of the parent process is suspended until the child has performed an exec() or _exit().</li>
</ul>
<h2 id="c25-process-termination">C25: Process Termination</h2>
<p><strong><em>There are two ways to terminate a process</em></strong></p>
<ul>
<li><em>Abnormal</em>: a termination signal is sent to process.</li>
<li><em>Normal</em>: process calls <code>_exit()</code> itself. <code>_exit()</code> là hàm được định nghĩa trong thư viện chuẩn C, trực tiếp gọi đến các hàm termination process của Linux. </li>
</ul>
<p><strong><em>Exit status</em></strong></p>
<p>Refer <a href="https://www.gnu.org/software/libc/manual/html_node/Exit-Status.html">Exit Status</a> in gnu.org.</p>
<p><code>EXIT_SUCCESS</code> &amp; <code>EXIT_FAILURE</code> được định nghĩa trong <code>stdlib.h</code> được sử dụng là các giá trị trả về khi terminate một process.</p>
<p><strong><em><code>_exit()</code> vs <code>exit()</code></em></strong></p>
<p>Trong một số chương trình bình thường, <code>_exit()</code> không được gọi trực tiếp mà được gọi thông quan <code>exit()</code>. Về cơ bản, <code>exit()</code> thực hiện một số tác vụ trước khi gọi <code>_exit()</code> ví dụ như: flush out stdio buffer.</p>
<p><strong><em><code>exit()</code> vs <code>return n</code></em></strong></p>
<p>Việc gọi đến hàm <code>return n</code> trong hàm <code>main()</code> tương đương với quá trình gọi đến <code>exit()</code>.</p>
<h2 id="c26-monitoring-child-processes">C26: Monitoring Child Processes</h2>
<p><strong><em>Wait for child process(es)</em></strong></p>
<p>The system call <strong><span style="color:red">wait()</span></strong> waits for one of the children of the calling process to terminate and returns the termination status of that child in the buffer pointed to by status.</p>
<p><code>wait()</code> được sử dụng để chờ tất cả các <code>child</code> process terminate. Trường hợp thành công <code>wait()</code> trả về giá trị PID của <code>child</code> process vừa mới terminate vaf trả về -1 trong trường hợp lỗi, bao gồm các trường hợp lỗi sau:</p>
<ul>
<li>Không còn một <code>child</code> process nào đang tồn tại. Khi đó <code>ECHILD</code> được thiết lập cho <code>errno</code> -&gt; đặc điểm này được sử dụng để monitor tất cả các <code>child</code> process bằng đoạn mã dưới đây:</li>
</ul>
<pre><code>while ((childPid = wait(NULL)) != -1)
    continue;
if (errno != ECHILD) /* An unexpected error... */
    errExit(&quot;wait&quot;);
</code></pre>

<ul>
<li>Unexpected Error</li>
</ul>
<p>Trong trường hợp các <code>child</code> processes cùng terminate một thời điểm, thứ tự trả về của <code>wait()</code> là không xác định.</p>
<p><strong><em>Wait for specific child process</em></strong></p>
<p><code>wait()</code> có một số giới hạn, trong đó không thể chờ một <code>child</code> process xác định. <strong><span style="color:red">waitpid()</span></strong> được thiết kế để thực hiện được điều đó.</p>
<p><code>pid_t waitpid(pid_t pid, int *status, int options);</code></p>
<p>Trong trường hợp tham số pid được thiết lập là -1 thì <code>waitpid()</code> tương đương với <code>wait()</code>.</p>
<p><strong><em>Orphans and Zombies</em></strong></p>
<p>Một <code>child</code> process được gọi là <strong><span style="color:red">Orphaned</span></strong> khi <code>parrent</code> của process đó terminate trước. Khi đó "orphaned child" được quản lý bởi <code>init</code> process.</p>
<p><strong><span style="color:red">Zombie</span></strong> là trạng thái của một <code>child</code> process trong trường hợp process đó terminate nhưng <code>parrent</code> process chưa kịp gọi đến <code>wait()</code>. Sau khi terminate, các tài nguyên của <code>child</code> đã được giải phóng nhưng thông tin về process đó vẫn tồn tại trong <em>Kernel's process table</em> cho đến khi <code>parrent</code> gọi đến <code>wait()</code>.</p>
<p>Khi có quá nhiều "zombie process" trong hệ thông sẽ làm đầy <em>Kernel's process table</em> và có thể cản trở quá trình tạo mới một process. Do "zombie process" không thể bị kill bởi các signal nên quá trình loại bỏ các process này phải chờ đến khi <code>parrent</code> process exit. Khi đó, <code>init</code> process tiếp nhận các zombie này như các "orphaned process" và tiến hành terminate (*).</p>
<p><em>*But how <code>init</code> kill zombies?</em></p>
<h2 id="c29-threads-introduction">C29: Threads - Introduction</h2>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Vu Tang.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b41f3d20.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>